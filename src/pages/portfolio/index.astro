---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import ImageLightbox from '../../components/ImageLightbox.svelte'

const allProjects = await getCollection('portfolio');
---
<BaseLayout title="My Portfolio">
    <h1>My Portfolio</h1>
    <div class="project-grid">
        {allProjects.map((project:CollectionEntry<'portfolio'>) => (
            <ImageLightbox
                client:visible 
                imageSrc={project.data.fullImg}
                title={project.data.title}
                desc={project.data.desc}
                >
        <div class="project-card">
            <Image
                src={project.data.thumbImg}
                alt={project.data.title}
                width={500}
                height={300}
                format="avif"
                />
                <h2>{project.data.title}</h2>
                </div>
        </ImageLightbox>
                ))}
    </div>
</BaseLayout>

<style>
  .project-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    column-gap: 6rem;
    row-gap: 2rem;
  }
  .project-card {
    cursor: pointer;
    text-decoration: none;
    color: inherit;
    display: block;
  }
  .project-card img {
    object-fit: cover;
    transition: filter 0.2s ease-in-out;
    border: 2px solid #1e1e1e;
    border-radius: 8px;
    padding: 5px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
  }
  .project-card:hover img {
    filter: brightness(1.0) contrast(1.2);
  }
  .project-card h2 {
    text-align: center;
    margin-top: 0.5rem;
    font-size: 1.25rem;
  }
</style>